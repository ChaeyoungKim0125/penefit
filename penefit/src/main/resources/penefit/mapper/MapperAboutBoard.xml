<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper  namespace="com.penefit.moons.mapper.MapperAboutBoard">

<select id="getNoticeList" resultType="com.penefit.moons.domain.NoticeVO">				
	SELECT * FROM notice
</select>

<!-- 공지사항 상세 -->
<select id="noticeSelectOne" resultType="com.penefit.moons.domain.NoticeVO">
	SELECT * FROM notice WHERE notice_num=#{notice_num}
</select>

<!-- 공지사항 조회수증가 -->
<update id="noticeViewCnt">
	UPDATE notice SET notice_viewcnt = notice_viewcnt + 1 WHERE notice_num=#{notice_num}
</update>

<!-- 공지사항 수정 -->
<update id="modiNotice">
	UPDATE notice SET notice_title=#{notice_title}, notice_content=#{notice_content},notice_modidate=now() WHERE notice_num=#{notice_num}
</update>
<!-- 공지사항 삭제 -->
<delete id="delNotice">
	DELETE FROM notice WHERE notice_num=#{notice_num}
</delete>

<!-- 지역 전체 게시판 -->
<select id="getCityList" resultType="com.penefit.moons.domain.BoardVO">
	SELECT * FROM board WHERE board_type= 'CC'  
</select>

<!-- 각 지역별 게시판 -->
<select id="getOneCityList" resultType="com.penefit.moons.domain.BoardVO">
	SELECT * FROM board WHERE board_type= 'CC' AND city_code=#{city_code} 
</select>

<!-- QnA 게시판 -->
<select id="getQnAList" resultType="com.penefit.moons.domain.QnAVO">
	SELECT * FROM qna
</select>

<insert id="regQnA">
	INSERT INTO qna(qna_title, qna_content, member_id, qna_regdate) VALUES (#{qna_title}, #{qna_content}, #{member_id}, now())
</insert>

<select id="qnaSelectOne" resultType="com.penefit.moons.domain.QnAVO">
	SELECT * FROM qna WHERE qna_num=#{qna_num}
</select>

<update id="modiQnA">
	UPDATE qna SET qna_title=#{qna_title}, qna_content=#{qna_content} WHERE qna_num=#{qna_num}
</update>

<delete id="delQnA">
	DELETE FROM qna WHERE qna_num=#{qna_num}
</delete>

<!-- 댓글 -->
<insert id="regReply">
	INSERT INTO reply (qna_num,reply_content, reply_regdate, member_id, reply_type) VALUES(#{qna_num},#{reply_content},now(),#{member_id}, 'R')
</insert>

<select id="getReplyList" resultType="com.penefit.moons.domain.ReplyVO">
	SELECT * FROM reply WHERE qna_num=#{qna_num} and reply_type ='R'
</select>

<delete id="delReply">
	DELETE FROM reply WHERE reply_num=#{reply_num}
</delete>

<select id="getFaQList" resultType="com.penefit.moons.domain.BoardVO">
	SELECT * FROM board WHERE board_type= 'FF'  
</select>


</mapper>